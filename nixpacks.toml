# This configuration is for install, build and start commands
# powered by Nixpacks.
# https://nixpacks.com/docs/configuration/file

# Optional: Nixpacks can figure it out automatically
providers = ["node"]

# Optional: already as "engines": { "node" } in package.json
# [variables]
# NIXPACKS_NODE_VERSION = '24'

# Custom install phase to ensure corepack is available
# The oxc-parser optional dependency is declared explicitly in package.json
[phases.install]
cmds = [
  "npm install -g corepack@0.24.1 && corepack enable",
  "pnpm install --frozen-lockfile"
]

# Optional: already as start script in package.json
[start]
cmd = "node .output/server/index.mjs"

